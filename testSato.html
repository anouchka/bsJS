<!DOCTYPE html>
<html lang="ko">
<title>bs5 Test suite (Sato)</title>
<meta name="keywords" content="bs5" />
<meta name="description" content="bs5 Test suite" />
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,target-densitydpi=medium-dpi" />
<link rel="shortcut icon" href="http://blog.bsidesoft.com/favicon.ico" type="image/x-icon">
<script id="xml" type="text/template"><![CDATA[
<topics>
	<volume>
		<category>cat1</category>
		<title>title1</title>
		<time>2013.08.09.</time>
		<img_list><![CDATA[m/1.png]]></img_list>
	</volume>
	<volume>
		<category>cat2</category>
		<title>title2</title>
		<time>2013.10.09.</time>
		<img_list><![CDATA[m/2.png]]></img_list>
	</volume>
</topics>
]]></script>
</head>
<body>
<a href="https://github.com/projectBS/bsJS">
	<img style="position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
</a>
<div id="stage">test stage</div>
<div id="result"></div>
<div id="test"></div>
<script src="./bs5.js"></script>
<script src="./bsTest.js"></script>

<div id="nav_tests">
<ul style="list-style: none;">
	<li><input type="button" value="bs.$url('https://github.com/projectBS/bsJS')" onclick="bs.$url('https://github.com/projectBS/bsJS')"></li>
	<li><input type="button" value="bs.$back()" onclick="bs.$back()"></li>
	<li><input type="button" value="bs.$reload()" onclick="bs.$reload()"></li>
</ul>
</div>

<script>
bs( function(){

function printer(r){document.getElementById('test').innerHTML += r;}
bsTest.result = function(r){ document.getElementById('result').innerHTML = r; }

bs.$xml( document.getElementById('xml').text, function( $d ){
	bsTest( printer, 'async xml parsing',

	"$d.topics.volume[0].title", 'title1', $d.topics.volume[0].title.value
	);

} );
bs.c( '#stage' ).$( 'border', '1px solid #f00', 'margin-top', 30, 'width', '50:%', 'padding', 10 );
bs.css( '#stage' ).$( 'width', 100 );
bs.d( '#stage' ).$( 'background-color', '#eee' );
bs.$ck( 'bsName', "bs5" );

(function(){
	var i;
	bs.d( '#stage' ).$(
	'mousedown', function( $e ){
		i = 1;
		bsTest( printer, 'mousedown', "this.id", 'stage', this.id, "$e.x",[0,this.offsetWidth], $e.x);
	},
	'mousemove', function( $e ){
		if( i++ == 1 ){
			bsTest( printer, 'mousemove', "this.id", 'stage', this.id, "typeof $e.dx", 'number', typeof $e.dx );
		}
	},
	'mouseup', function( $e ){
		bsTest( printer, 'mouseup', "this.id", 'stage', this.id, "$e.x",[0,this.offsetWidth], $e.x );
		bs.d( '#stage' ).$( 'mousedown', null, 'mousemove', null, 'mouseup', null );
	}
	);
} )();

bs.D( 'data1' ).$('a', 3, 'b', function( a ){ return a;}, 'c', function(){return this.a;}, 'd', [0,1,2,3] );
bsTest( printer, 'data',
"bs.D.data1.a", 3, bs.D.data1.a,
"bs.D.data1.$( 'a' )", 3, bs.D.data1.$( 'a' ),
"bs.D.data1.b(5)", 5, bs.D.data1.b(5),
"bs.D.data1.$( '=b', 5 )", 5, bs.D.data1.$( '=b', 5 ),
"bs.D.data1.$( '~c' )() == bs.D.data1.a", bs.D.data1.a,bs.D.data1.$( '~c' )(), 
"bs.D.data1.$( 'd.2' )", 2, bs.D.data1.$( 'd.2' )
);
bsTest( printer, 'function',
"bs.$ck( 'bsName' )", 'bs5', bs.$ck( 'bsName' ),
"bs.$ex( 5, '~', 10 )", [5,10], bs.$ex( 5, '~', 10 ),
"bs.$ex( 10, '~', 5 )", [5,10], bs.$ex( 10, '~', 5 ),
"bs.$ex( 5, '~', 5 )", [5,5], bs.$ex( 5, '~', 5 ),
"bs.$ex( -5, '~', -10 )", [-10,-5], bs.$ex( -5, '~', -10 ),
"bs.$ex( -10, '~', -5 )", [-10,-5], bs.$ex( -10, '~', -5 ),
"bs.$ex( 5, '~f', 10 )", [5,10], bs.$ex( 5, '~f', 10 ),
"bs.$ex( 10, '~f', 5 )", [5,10], bs.$ex( 10, '~f', 5 ),
"bs.$ex( 5, '~f', 5 )", [5,5], bs.$ex( 5, '~f', 5 ),
"bs.$ex( -5, '~f', -10 )", [-10,-5], bs.$ex( -5, '~f', -10 ),
"bs.$ex( -10, '~f', -5 )", [-10,-5], bs.$ex( -10, '~f', -5 ),
"bs.$ex( 5, '~', 13, '~f', 17)", [5, 17], bs.$ex( 5, '~', 13, '~f', 17),
"bs.$trim( ' foo bar ' )", 'foo bar', bs.$trim( ' foo bar ' ),
"bs.$trim( '	foo	bar	' )", 'foo	bar', bs.$trim( '	foo	bar	' ),
"bs.$xml(xml).topics.volume[1].title.value", 'title2', bs.$xml( document.getElementById('xml').text ).topics.volume[1].title.value

);

bsTest( printer, 'dom',
"bs.d( '#stage' ).$('_margin-top' )", 30, bs.d( '#stage' ).$('_margin-top' ),
"bs.dom( '#stage' ).$( 'background-color' )", '#eee', bs.dom( '#stage' ).$( 'background-color' )
);
bsTest( printer, 'css',
"bs.c( '#stage' ).$( 'width' )", 100, bs.c( '#stage' ).$( 'width' ),
"bs.css( '#stage' ).$( 'padding' )", 10, bs.css( '#stage' ).$( 'padding' )
);

bs.$timeout( 0 );
bs.$get( function( rs ){
	bsTest( printer, 'get timeout', "bs.$get( cb, url ) result", false, rs !== null);
},  'ajax.json' );

bs.$timeout( 5 );
bs.$get( function( rs ){
	var r = JSON.parse( rs );
	bsTest( printer, 'get',
		"bs.$get( cb, url ) url.a", 1, r.a,
		"bs.$get( cb, url ) url.c", 3, r.c
	);
},  'ajax.json' );

} );
</script>
</body>
</html>
