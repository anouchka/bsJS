<!DOCTYPE html>
<html lang="ko">
<title>bs5 Test suite</title>
<meta name="keywords" content="bs5" />
<meta name="description" content="bs5 Test suite" />
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,target-densitydpi=medium-dpi" />
<link rel="shortcut icon" href="http://blog.bsidesoft.com/favicon.ico" type="image/x-icon">
<script id="xml" type="text/template"><![CDATA[
<topics>
	<volume>
		<category>cat1</category>
		<title>title1</title>
		<time>2013.08.09.</time>
		<img_list><![CDATA[m/1.png]]></img_list>
	</volume>
	<volume>
		<category>cat2</category>
		<title>title2</title>
		<time>2013.10.09.</time>
		<img_list><![CDATA[m/2.png]]></img_list>
	</volume>
</topics>
]]></script>
</head>
<body>
<a href="https://github.com/projectBS/bsJS">
	<img style="position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
</a>
<div id="stage" data-id="stageId" data-id2="stageId2">test stage</div>
<div class="clsStage" style="display:none;">test stage</div>
<div class="clsStage" style="display:none;">test stage</div>
<div id="result"></div>
<div id="test"></div>
<script src="./bs5.js"></script>
<script src="./bsTest.js"></script>
<script>
bs( function(){

function printer(r){document.getElementById('test').innerHTML += r;}
bsTest.result = function(r){ document.getElementById('result').innerHTML = r; }

bs.D( 'data1' ).$( 'a', 3, 'b', function( a ){ return a;},
	'c', function(){return this.a;},
	'd', [0,1,2,3]
);
bs.$xml( document.getElementById('xml').text, function( $d ){
	bsTest( printer, 'async xml parsing',

	"$d.topics.volume[0].title", 'title1', $d.topics.volume[0].title.value
	);

} );
bs.c( '#stage' ).$( 'border', '1px solid #f00', 'margin-top', 30, 'width', '50:%', 'padding', 10 );
bs.css( '#stage' ).$( 'width', 100 );
bs.d( '#stage' ).$( 'background-color', '#eee' );
bs.$ck( 'bsName', "bs5" );

(function(){
	var i;
	bs.d( '#stage' ).$(
	'mousedown', function( $e ){
		i = 1;
		bsTest( printer, 'mousedown',
			"this.id", 'stage', this.id,
			"$e.x", [0,this.offsetWidth], $e.x
		);
	},
	'mousemove', function( $e ){
		if( i++ == 1 ){
			bsTest( printer, 'mousemove', 
				"this.id", 'stage', this.id,
				"typeof $e.dx", 'number', typeof $e.dx,
				"typeof $e.dy", 'number', typeof $e.dy
			);
		}
	},
	'mouseup', function( $e ){
		bsTest( printer, 'mouseup', "this.id", 
			'stage', this.id, "$e.x",
			[0,this.offsetWidth], $e.x
		);
		bs.d( '#stage' ).$( 'mousedown', null, 'mousemove', null, 'mouseup', null );
	}
	);
} )();

bsTest( printer, 'data',
"bs.D.data1.a", 3, bs.D.data1.a,
"bs.D.data1.$( 'a' )", 3, bs.D.data1.$( 'a' ),
"bs.D.data1.b(5)", 5, bs.D.data1.b(5),
"bs.D.data1.$( '=b', 5 )", 5, bs.D.data1.$( '=b', 5 ),
"bs.D.data1.$( '~c' )() == bs.D.data1.a", bs.D.data1.a,bs.D.data1.$( '~c' )(), 
"bs.D.data1.$( 'd.2' )", 2, bs.D.data1.$( 'd.2' )
);
bsTest( printer, 'function',
"bs.$ck( 'bsName' )", 'bs5', bs.$ck( 'bsName' ),
"bs.$ex( 5, '~', 10 )", [5,10], bs.$ex( 5, '~', 10 ),
"bs.$trim( ' foo bar ' )", 'foo bar', bs.$trim( ' foo bar ' ),
"bs.$xml(xml).topics.volume[1].title.value", 'title2', bs.$xml( document.getElementById('xml').text ).topics.volume[1].title.value
);
bsTest( printer, 'dom selector',
"bs.d( '#stage' ).$('_margin-top' )", 30, bs.d( '#stage' ).$('_margin-top' ),
"bs.d( document.getElementById('stage') ).$('_margin-top' )", 30, bs.d( document.getElementById('stage') ).$('_margin-top' ),
"bs.d( '.clsStage' ).length", 2, bs.d( '.clsStage' ).length,
//
"bs.dom( '#stage' ).$( 'background-color' )", '#eee', bs.dom( '#stage' ).$( 'background-color' ),
"bs.dom( document.getElementById('stage') ).$( 'background-color' )", '#eee', bs.dom( document.getElementById('stage') ).$( 'background-color' ),
"bs.dom( '.clsStage' ).length", 2, bs.dom( '.clsStage' ).length
);
bsTest( printer, 'dom method',
"bs.d( '&lt;div&gt;test&lt;/div&gt;' ).$( 'html' )", 'test', bs.d( '<div>test</div>' ).$( 'html' ),
"bs.d( '&lt;div&gt;test&lt;/div&gt;' ).$( 'text' )", 'test', bs.d( '<div>test</div>' ).$( 'text' ),
"bs.d( '&lt;tr&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;' ).$( 'html' )", undefined, bs.dom( '<tr><td>test</td></tr>' ).$( 'html' ),
"bs.d( '#stage' ).$( '@data-id' )", "stageId", bs.d( '#stage' ).$( '@data-id' ),
"bs.d( '#stage' ).$( '@data-id', 'stageId2' )", "stageId2", bs.d( '#stage' ).$( '@data-id', 'stageId2' ),
"bs.d( '#stage' ).$( '@data-id' )", "stageId2", bs.d( '#stage' ).$( '@data-id' ),
"bs.d( '#stage' ).$( '@data-id', null )", null, bs.d( '#stage' ).$( '@data-id', null ),
//
"bs.dom( '&lt;div&gt;test&lt;/div&gt;' ).$( 'html' )", 'test', bs.dom( '<div>test</div>' ).$( 'html' ),
"bs.dom( '&lt;div&gt;test&lt;/div&gt;' ).$( 'text' )", 'test', bs.dom( '<div>test</div>' ).$( 'text' ),
"bs.dom( '&lt;tr&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;' ).$( 'html' )", undefined, bs.dom( '<tr><td>test</td></tr>' ).$( 'html' ),
"bs.dom( '#stage' ).$( '@data-id2' )", "stageId2", bs.d( '#stage' ).$( '@data-id2' ),
"bs.dom( '#stage' ).$( '@data-id2', 'stageId3' )", "stageId3", bs.d( '#stage' ).$( '@data-id2', 'stageId3' ),
"bs.dom( '#stage' ).$( '@data-id2' )", "stageId3", bs.d( '#stage' ).$( '@data-id2' ),
"bs.dom( '#stage' ).$( '@data-id2', null )", null, bs.dom( '#stage' ).$( '@data-id2', null )
);
bsTest( printer, 'css',
"bs.c( '#stage' ).$( 'width' )", 100, bs.c( '#stage' ).$( 'width' ),
"bs.css( '#stage' ).$( 'padding' )", 10, bs.css( '#stage' ).$( 'padding' )
);
bs.$get( function( rs ){
	var r = JSON.parse( rs );
	bsTest( printer, 'ajax',
		"bs.$get( cb , url ) url.a", 1, r.a,
		"bs.$get( cb , url ) url.c", 3, r.c
	);
},  'ajax.json' );

} );
</script>
</body>
</html>
